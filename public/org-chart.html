(rolesByUnit[unit.id] || []).forEach(r => {
  const person = peopleMap[r.person_id];
  const roleDiv = document.createElement('div');
  roleDiv.className = 'ml-4 text-sm text-gray-700 flex items-center';
  roleDiv.textContent =
    `- ${person ? person.name : 'Unknown'} (${r.is_manager ? 'Manager' : 'Member'})`;

  const delBtn = document.createElement('button');
  delBtn.textContent = '❌';
  delBtn.className = 'ml-2 text-xs text-red-600 hover:underline';
  delBtn.onclick = async () => {
    if (confirm(`Remove ${person?.name} from ${unit.name}?`)) {
      try {
        const res = await fetch('/api/admin/delete-role', {
          method: 'DELETE',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ role_id: r.id })
        });
        const result = await res.json();
        if (!res.ok) {
          alert(result.message || 'Error deleting role');
          return;
        }
        loadOrgData();
      } catch (err) {
        alert('Unexpected error: ' + err.message);
      }
    }
  };

  roleDiv.appendChild(delBtn);
  container.appendChild(roleDiv);
});

