<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Administration Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
  <div class="max-w-5xl mx-auto p-6">
    <header class="mb-6">
      <h1 class="text-2xl font-bold">Administration Portal</h1>
      <p class="text-gray-600 text-sm">Manage iterations, organization, and database state.</p>
    </header>

    <div class="bg-white rounded shadow p-6 space-y-4">
      <a href="iteration-manager.html" 
         class="block bg-blue-600 text-white px-4 py-3 rounded text-center hover:bg-blue-700">
         Iteration Manager
      </a>
      <a href="org-chart.html" 
         class="block bg-blue-600 text-white px-4 py-3 rounded text-center hover:bg-blue-700">
         Organization Manager
      </a>
      <a href="table-viewer.html" 
         class="block bg-blue-600 text-white px-4 py-3 rounded text-center hover:bg-blue-700">
         Database Table Viewer
      </a>
    </div>

    <div class="mt-6">
      <a href="index.html" class="text-blue-600 hover:underline">&larr; Back to Welcome</a>
    </div>

    <details class="mt-4">
      <summary class="cursor-pointer">Debug log (open to view)</summary>
      <pre id="debug" class="bg-gray-100 p-2 text-xs overflow-auto h-40"></pre>
    </details>
  </div>

  <script>
    const log = (msg, obj=null) => {
      document.getElementById("debug").textContent += 
        `[admin] ${msg} ${obj?JSON.stringify(obj):""}\n`;
    };
    async function init() {
      log("page loaded");
      const res = await fetch("/api/admin/active-iteration");
      const data = await res.json();
      log("Active iteration", data);
    }
    window.addEventListener("load", init);
  </script>
</body>
</html>

